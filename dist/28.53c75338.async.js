webpackJsonp([28],{1151:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.login=void 0;var a=n(182),u=r(a),o=n(302),s=r(o),c=(t.login=function(){var e=(0,s.default)(u.default.mark(function e(t){var n,r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=[];for(r in t)t[r]&&n.push(r+"="+t[r]);return e.abrupt("return",(0,c.token)(i.SERVER_URL+"/oauth2/access_token","grant_type=password&"+n.join("&")));case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n(303)),i=n(184)},718:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(315),u=r(a),o=n(15),s=r(o),c=n(182),i=r(c),f=n(183),l=n(1151),p=n(123),d=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(p);t.default={namespace:"login",state:{status:void 0},effects:{login:i.default.mark(function e(t,n){var r,a=t.payload,u=n.call,o=n.put;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o({type:"changeSubmitting",payload:!0});case 2:return e.next=4,u(l.login,a);case 4:return r=e.sent,e.next=7,o({type:"changeLoginStatus",payload:r});case 7:if(!r.success){e.next=12;break}return e.next=10,o({type:"saveToken",payload:r.data.token});case 10:return e.next=12,o(f.routerRedux.push("/"));case 12:case"end":return e.stop()}},e,this)}),logout:i.default.mark(function e(t,n){var r=n.put;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r({type:"changeLoginStatus",payload:{status:!1}});case 2:return e.next=4,r({type:"removeToken"});case 4:return e.next=6,r(f.routerRedux.push("/user/login"));case 6:case"end":return e.stop()}},e,this)})},reducers:{changeLoginStatus:function(e,t){var n=t.payload;return(0,s.default)({},e,{status:n.status,type:n.type,submitting:!1})},changeSubmitting:function(e,t){var n=t.payload;return(0,s.default)({},e,{submitting:n})},saveToken:function(e,t){var n=t.payload;return d.setItem(d.ACCESS_TOKEN,n.accessToken),d.setItem(d.REFRESH_TOKEN,n.refreshToken),d.setItem(d.USER,(0,u.default)(n.user)),e},removeToken:function(e){return d.removeItem(d.ACCESS_TOKEN),d.removeItem(d.REFRESH_TOKEN),d.removeItem(d.USER),e}}},e.exports=t.default}});