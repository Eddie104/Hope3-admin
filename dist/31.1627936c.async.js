webpackJsonp([31],{1178:function(t,a,e){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(a,"__esModule",{value:!0}),a.findPopular=a.removeGoods=a.update=a.detail=void 0;var n=e(187),o=r(n),u=e(309),s=r(u),i=(a.detail=function(){var t=(0,s.default)(o.default.mark(function t(a){return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,i.post)(l.SERVER_URL+"/api/admin/detail_goods_color",a));case 1:case"end":return t.stop()}},t,this)}));return function(a){return t.apply(this,arguments)}}(),a.update=function(){var t=(0,s.default)(o.default.mark(function t(a){return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,i.post)(l.SERVER_URL+"/api/admin/update_goods_color",a));case 1:case"end":return t.stop()}},t,this)}));return function(a){return t.apply(this,arguments)}}(),a.removeGoods=function(){var t=(0,s.default)(o.default.mark(function t(a,e){return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,i.get)(l.SERVER_URL+"/api/admin/remove_goods/"+a+"/"+e));case 1:case"end":return t.stop()}},t,this)}));return function(a,e){return t.apply(this,arguments)}}(),a.findPopular=function(){var t=(0,s.default)(o.default.mark(function t(a,e){return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,i.get)(l.SERVER_URL+"/api/admin/find_popular/"+a+"/"+e));case 1:case"end":return t.stop()}},t,this)}));return function(a,e){return t.apply(this,arguments)}}(),e(310)),l=e(190)},743:function(t,a,e){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(a,"__esModule",{value:!0});var n=e(305),o=r(n),u=e(16),s=r(u),i=e(187),l=r(i),d=e(311),c=r(d);e(312);var p=e(1178);a.default={namespace:"goodsColor",state:{detail:null,goodsListData:{list:[],pagination:{total:0,current:0}},popularListData:{list:[],pagination:{total:0,current:0}},loading:!1},effects:{findPopular:l.default.mark(function t(a,e){var r,n=a.payload,o=n.page,u=n.count,s=a.callback,i=e.call,d=e.put;return l.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d({type:"setLoading",payload:!0});case 2:return t.next=4,i(p.findPopular,o,u);case 4:if(r=t.sent,!r.success){t.next=11;break}return t.next=8,d({type:"setPopularListData",payload:r.data});case 8:s&&s(),t.next=12;break;case 11:c.default.error(r.data);case 12:case"end":return t.stop()}},t,this)}),detail:l.default.mark(function t(a,e){var r,n=a.payload,o=a.callback,u=e.call,s=e.put;return l.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u(p.detail,n);case 2:if(r=t.sent,!r.success){t.next=9;break}return t.next=6,s({type:"setDetail",payload:r.data});case 6:o&&o(),t.next=10;break;case 9:c.default.error(r.data);case 10:case"end":return t.stop()}},t,this)}),update:l.default.mark(function t(a,e){var r,n=a.payload,o=a.callback,u=e.call,s=e.put;return l.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u(p.update,n);case 2:if(r=t.sent,!r.success){t.next=9;break}if(c.default.success("\u4fdd\u5b58\u6210\u529f"),o&&o(),"popularGoodsColorList"!==n.from){t.next=9;break}return t.next=9,s({type:"updatePopularListData",payload:n});case 9:case"end":return t.stop()}},t,this)}),clearDetail:l.default.mark(function t(a,e){var r=e.put;return l.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r({type:"setDetail",payload:null});case 2:case"end":return t.stop()}},t,this)}),removeGoods:l.default.mark(function t(a,e){var r,n=a.payload,o=a.callback,u=e.call,s=e.put;return l.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u(p.removeGoods,n._id,n.goods_id);case 2:if(r=t.sent,!r.success){t.next=10;break}return t.next=6,s({type:"rmeoveGoodsById",payload:n.goods_id});case 6:o&&o(),c.default.success("\u5220\u9664\u6210\u529f"),t.next=11;break;case 10:c.default.error(r.data);case 11:case"end":return t.stop()}},t,this)})},reducers:{setDetail:function(t,a){var e=a.payload;if(e){var r=e.goodsType;return(0,s.default)({},t,{detail:e.goodsColor,goodsListData:(0,s.default)({},e.goodsArr,{list:e.goodsArr.list.map(function(t){return t.goodsTypeName=r.name,t.goodsTypeImg=r.img,t})})})}return(0,s.default)({},t,{detail:null,goodsListData:{list:[],pagination:{total:0,current:0}}})},rmeoveGoodsById:function(t,a){for(var e=a.payload,r=[].concat((0,o.default)(t.goodsListData.list)),n=0;n<r.length;n++)r[n]._id===e&&r.splice(n,1);return(0,s.default)({},t,{goodsListData:{list:r,pagination:(0,s.default)({},t.goodsListData.pagination)}})},setPopularListData:function(t,a){var e=a.payload;return(0,s.default)({},t,{popularListData:e,loading:!1})},setLoading:function(t,a){var e=a.payload;return(0,s.default)({},t,{loading:!!e})},updatePopularListData:function(t,a){for(var e=a.payload,r=e._id,n=e.is_popular,u=[].concat((0,o.default)(t.popularListData.list)),i=0;i<u.length;i++)if(u[i]._id===r){u[i].is_popular=n;break}return(0,s.default)({},t,{popularListData:{list:u,pagination:t.popularListData.pagination}})}}},t.exports=a.default}});