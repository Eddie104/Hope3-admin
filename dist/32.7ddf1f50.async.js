webpackJsonp([32],{1142:function(t,e,a){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.changeGoodsType=e.findRecommend=e.findPopular=e.removeGoods=e.update=e.detail=void 0;var n=a(182),o=r(n),u=a(302),s=r(u),i=(e.detail=function(){var t=(0,s.default)(o.default.mark(function t(e){return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,i.post)(d.SERVER_URL+"/api/admin/detail_goods_color",e));case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),e.update=function(){var t=(0,s.default)(o.default.mark(function t(e){return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,i.post)(d.SERVER_URL+"/api/admin/update_goods_color",e));case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),e.removeGoods=function(){var t=(0,s.default)(o.default.mark(function t(e,a){return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,i.get)(d.SERVER_URL+"/api/admin/remove_goods/"+e+"/"+a));case 1:case"end":return t.stop()}},t,this)}));return function(e,a){return t.apply(this,arguments)}}(),e.findPopular=function(){var t=(0,s.default)(o.default.mark(function t(e,a){return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,i.get)(d.SERVER_URL+"/api/admin/find_popular/"+e+"/"+a));case 1:case"end":return t.stop()}},t,this)}));return function(e,a){return t.apply(this,arguments)}}(),e.findRecommend=function(){var t=(0,s.default)(o.default.mark(function t(e,a){return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,i.get)(d.SERVER_URL+"/api/admin/find_recommend/"+e+"/"+a));case 1:case"end":return t.stop()}},t,this)}));return function(e,a){return t.apply(this,arguments)}}(),e.changeGoodsType=function(){var t=(0,s.default)(o.default.mark(function t(e){return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,i.post)(d.SERVER_URL+"/api/admin/goods_color/change_goods_type",e));case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),a(303)),d=a(183)},716:function(t,e,a){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var n=a(298),o=r(n),u=a(15),s=r(u),i=a(182),d=r(i),c=a(306),l=r(c);a(307);var p=a(1142);e.default={namespace:"goodsColor",state:{detail:null,goodsListData:{list:[],pagination:{total:0,current:0}},popularListData:{list:[],pagination:{total:0,current:0}},recommendListData:{list:[],pagination:{total:0,current:0}},loading:!1},effects:{findPopular:d.default.mark(function t(e,a){var r,n=e.payload,o=n.page,u=n.count,s=e.callback,i=a.call,c=a.put;return d.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c({type:"setLoading",payload:!0});case 2:return t.next=4,i(p.findPopular,o,u);case 4:if(r=t.sent,!r.success){t.next=11;break}return t.next=8,c({type:"setPopularListData",payload:r.data});case 8:s&&s(),t.next=12;break;case 11:l.default.error(r.data);case 12:case"end":return t.stop()}},t,this)}),findRecommend:d.default.mark(function t(e,a){var r,n=e.payload,o=n.page,u=n.count,s=e.callback,i=a.call,c=a.put;return d.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c({type:"setLoading",payload:!0});case 2:return t.next=4,i(p.findRecommend,o,u);case 4:if(r=t.sent,!r.success){t.next=11;break}return t.next=8,c({type:"setRecommendListData",payload:r.data});case 8:s&&s(),t.next=12;break;case 11:l.default.error(r.data);case 12:case"end":return t.stop()}},t,this)}),detail:d.default.mark(function t(e,a){var r,n=e.payload,o=e.callback,u=a.call,s=a.put;return d.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u(p.detail,n);case 2:if(r=t.sent,!r.success){t.next=9;break}return t.next=6,s({type:"setDetail",payload:r.data});case 6:o&&o(),t.next=10;break;case 9:l.default.error(r.data);case 10:case"end":return t.stop()}},t,this)}),update:d.default.mark(function t(e,a){var r,n=e.payload,o=e.callback,u=a.call,s=a.put;return d.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u(p.update,n);case 2:if(r=t.sent,!r.success){t.next=14;break}if(l.default.success("\u4fdd\u5b58\u6210\u529f"),o&&o(),"popularGoodsColorList"!==n.from){t.next=11;break}return t.next=9,s({type:"updatePopularListData",payload:n});case 9:t.next=14;break;case 11:if("recommendGoodsColorList"!==n.from){t.next=14;break}return t.next=14,s({type:"updateRecommendListData",payload:n});case 14:case"end":return t.stop()}},t,this)}),clearDetail:d.default.mark(function t(e,a){var r=a.put;return d.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r({type:"setDetail",payload:null});case 2:case"end":return t.stop()}},t,this)}),removeGoods:d.default.mark(function t(e,a){var r,n=e.payload,o=e.callback,u=a.call,s=a.put;return d.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u(p.removeGoods,n._id,n.goods_id);case 2:if(r=t.sent,!r.success){t.next=10;break}return t.next=6,s({type:"rmeoveGoodsById",payload:n.goods_id});case 6:o&&o(),l.default.success("\u5220\u9664\u6210\u529f"),t.next=11;break;case 10:l.default.error(r.data);case 11:case"end":return t.stop()}},t,this)})},reducers:{setDetail:function(t,e){var a=e.payload;if(a){var r=a.goodsType;return(0,s.default)({},t,{detail:a.goodsColor,goodsListData:(0,s.default)({},a.goodsArr,{list:a.goodsArr.list.map(function(t){return t.goodsTypeName=r.name,t.goodsTypeImg=r.img,t})})})}return(0,s.default)({},t,{detail:null,goodsListData:{list:[],pagination:{total:0,current:0}}})},rmeoveGoodsById:function(t,e){for(var a=e.payload,r=[].concat((0,o.default)(t.goodsListData.list)),n=0;n<r.length;n++)r[n]._id===a&&r.splice(n,1);return(0,s.default)({},t,{goodsListData:{list:r,pagination:(0,s.default)({},t.goodsListData.pagination)}})},setPopularListData:function(t,e){var a=e.payload;return(0,s.default)({},t,{popularListData:a,loading:!1})},setRecommendListData:function(t,e){var a=e.payload;return(0,s.default)({},t,{recommendListData:a,loading:!1})},setLoading:function(t,e){var a=e.payload;return(0,s.default)({},t,{loading:!!a})},updatePopularListData:function(t,e){for(var a=e.payload,r=a._id,n=a.is_popular,u=[].concat((0,o.default)(t.popularListData.list)),i=0;i<u.length;i++)if(u[i]._id===r){u[i].is_popular=n;break}return(0,s.default)({},t,{popularListData:{list:u,pagination:t.popularListData.pagination}})},updateRecommendListData:function(t,e){for(var a=e.payload,r=a._id,n=a.is_recommend,u=[].concat((0,o.default)(t.recommendListData.list)),i=0;i<u.length;i++)if(u[i]._id===r){u[i].is_recommend=n;break}return(0,s.default)({},t,{recommendListData:{list:u,pagination:t.recommendListData.pagination}})}}},t.exports=e.default}});