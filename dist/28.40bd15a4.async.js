webpackJsonp([28],{1156:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.merge=t.fetchSubCategory=t.update=t.detail=t.find=void 0;var n=a(187),u=r(n),o=a(308),s=r(o),d=(t.find=function(){var e=(0,s.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.post)(c.SERVER_URL+"/admin/find_goods_type",t));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.detail=function(){var e=(0,s.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.get)(c.SERVER_URL+"/admin/detail_goods_type/"+t));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.update=function(){var e=(0,s.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.post)(c.SERVER_URL+"/admin/update_goods_type",t));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.fetchSubCategory=function(){var e=(0,s.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.get)(c.SERVER_URL+"/admin/fetch_sub_category/"+t));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.merge=function(){var e=(0,s.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.post)(c.SERVER_URL+"/admin/merge_goods_type",t));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a(309)),c=a(190)},744:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(305),u=r(n),o=a(16),s=r(o),d=a(311),c=r(d),l=a(187),i=r(l);a(312);var f=a(189),p=a(1156);t.default={namespace:"goodsType",state:{loading:!1,findFormValue:{name:null},listData:{list:[],pagination:{total:0,current:0}},goodsColorArr:[],detail:null,brands:[],category:[],subCategory:[]},effects:{find:i.default.mark(function e(t,a){var r,n=t.payload,u=a.call,o=a.put;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o({type:"changeStyleListLoading",payload:!0});case 2:return e.next=4,o({type:"createFindFormValue",payload:{name:n.name}});case 4:if(!n.resetFormValue){e.next=7;break}return e.next=7,o({type:"resetedFormValue"});case 7:return e.next=9,u(p.find,n);case 9:if(r=e.sent,!r.success){e.next=13;break}return e.next=13,o({type:"setListData",payload:r.data});case 13:return e.next=15,o({type:"changeStyleListLoading",payload:!1});case 15:case"end":return e.stop()}},e,this)}),detail:i.default.mark(function e(t,a){var r,n=t.payload,u=t.callback,o=a.call,s=a.put;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o(p.detail,n);case 2:if(r=e.sent,!r.success){e.next=9;break}return e.next=6,s({type:"setDetail",payload:r.data});case 6:u&&u(),e.next=10;break;case 9:c.default.error(r.data);case 10:case"end":return e.stop()}},e,this)}),fetchSubCategory:i.default.mark(function e(t,a){var r,n=t.payload,u=t.callback,o=a.call,s=a.put;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o(p.fetchSubCategory,n);case 2:if(r=e.sent,!r.success){e.next=9;break}return e.next=6,s({type:"setSubCategory",payload:r.data});case 6:u&&u(),e.next=10;break;case 9:c.default.error(r.data);case 10:case"end":return e.stop()}},e,this)}),update:i.default.mark(function e(t,a){var r,n=t.payload,u=t.callback,o=a.call;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o(p.update,n);case 2:r=e.sent,r.success&&(c.default.success("\u4fdd\u5b58\u6210\u529f"),u&&u());case 4:case"end":return e.stop()}},e,this)}),updateGoodsColor:i.default.mark(function e(t,a){var r=t.payload,n=t.callback,u=a.put;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u({type:"updateGoodsColorById",payload:r});case 2:n&&n();case 3:case"end":return e.stop()}},e,this)}),clearDetail:i.default.mark(function e(t,a){var r=a.put;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r({type:"setDetail",payload:null});case 2:case"end":return e.stop()}},e,this)}),merge:i.default.mark(function e(t,a){var r,n=t.payload,u=t.callback,o=a.call,s=a.put;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o(p.merge,n);case 2:if(r=e.sent,!r.success){e.next=9;break}return e.next=6,s({type:"mergeGoodsType",payload:n});case 6:u&&u(),e.next=10;break;case 9:c.default.error(r.data);case 10:case"end":return e.stop()}},e,this)}),navToGoodsColor:i.default.mark(function e(t,a){var r=t.payload,n=a.put;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(f.routerRedux.push("/goods/goods-color-editor/"+r));case 2:case"end":return e.stop()}},e,this)})},reducers:{changeStyleListLoading:function(e,t){var a=t.payload;return(0,s.default)({},e,{loading:a})},createFindFormValue:function(e,t){var a=t.payload;return(0,s.default)({},e,{findFormValue:(0,s.default)({},a)})},setListData:function(e,t){var a=t.payload;return(0,s.default)({},e,{listData:(0,s.default)({},a)})},resetedFormValue:function(e){return(0,s.default)({},e,{findFormValue:{name:null}})},setDetail:function(e,t){var a=t.payload;return a?(0,s.default)({},e,{detail:a.goodsType,goodsColorArr:a.goodsColorArr,brands:a.brands,category:a.category}):(0,s.default)({},e,{goodsColorArr:[],detail:null,brands:[],category:[],subCategory:[]})},setSubCategory:function(e,t){var a=t.payload;return(0,s.default)({},e,{subCategory:a})},updateGoodsColorById:function(e,t){for(var a=t.payload,r=[].concat((0,u.default)(e.goodsColorArr)),n=0;n<r.length;n+=1)if(r[n]._id===a._id){r[n]=a;break}return(0,s.default)({},e,{goodsColorArr:r})},mergeGoodsType:function(e,t){for(var a=t.payload,r=a.mergeTargetGoodsType,n=a.goodsTypeArr,o=[].concat((0,u.default)(e.listData.list)),d=o.length;--d>-1;)o[d]._id!==r&&n.includes(o[d]._id)&&o.splice(d,1);return(0,s.default)({},e,{listData:(0,s.default)({},e.listData,{list:o})})}}},e.exports=t.default}});