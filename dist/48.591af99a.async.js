webpackJsonp([48],{1294:function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.subscribe=t.merge=t.newColor=t.findGoodsTypeColor=t.fetchGoodsIdBySubscribe=t.findSubscribe=t.downloadColorImg=t.downloadImg=t.update=t.detail=t.remove=t.add=t.find=void 0;var n=r(120),u=a(n),o=r(295),d=a(o),s=(t.find=function(){var e=(0,d.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.post)(i.SERVER_URL+"/admin/find_goods_type",t));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.add=function(){var e=(0,d.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.post)(i.SERVER_URL+"/admin/add_goods_type",t));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.remove=function(){var e=(0,d.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.post)(i.SERVER_URL+"/admin/remove_goods_type",t));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.detail=function(){var e=(0,d.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.get)(i.SERVER_URL+"/admin/detail_goods_type/"+t));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.update=function(){var e=(0,d.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.post)(i.SERVER_URL+"/admin/update_goods_type",t));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.downloadImg=function(){var e=(0,d.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.post)(i.SERVER_URL+"/admin/download_img_goods_type",t));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.downloadColorImg=function(){var e=(0,d.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.post)(i.SERVER_URL+"/admin/download_color_img_goods_type",t));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.findSubscribe=function(){var e=(0,d.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.get)(i.SERVER_URL+"/admin/find_goods_type_subscribe/"+t));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.fetchGoodsIdBySubscribe=function(){var e=(0,d.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.get)(i.SERVER_URL+"/admin/fetch_goods_by_subscribe/"+t));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.findGoodsTypeColor=function(){var e=(0,d.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.get)(i.SERVER_URL+"/admin/find_goods_type_color/"+t));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.newColor=function(){var e=(0,d.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.post)(i.SERVER_URL+"/admin/new_goods_type_color",t));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.merge=function(){var e=(0,d.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.post)(i.SERVER_URL+"/admin/merge_goods_type",t));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.subscribe=function(){var e=(0,d.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.post)(i.SERVER_URL+"/admin/subscribe_goods_type",t));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),r(296)),i=r(183)},698:function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=r(65),u=a(n),o=r(11),d=a(o),s=r(291),i=a(s),c=r(120),l=a(c);r(292);var f=r(180),p=r(1294),m=r(183);t.default={namespace:"goodsType",state:{loading:!1,findFormValue:{name:null,brand_id:"all",gender:0},formBrandArr:[],listData:{list:[],pagination:{total:0,current:0}},detail:{},category:[],subCategory:[],brandArr:[],subscribeArr:[],colorModalVisible:!1},effects:{find:l.default.mark(function e(t,r){var a,n=t.payload,u=r.call,o=r.put;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o({type:"changeStyleListLoading",payload:!0});case 2:return e.next=4,o({type:"createFindFormValue",payload:{name:n.name,brand_id:n.brand_id,gender:n.gender}});case 4:if(!n.resetFormValue){e.next=7;break}return e.next=7,o({type:"resetedFormValue"});case 7:return e.next=9,u(p.find,n);case 9:if(a=e.sent,!a.success){e.next=13;break}return e.next=13,o({type:"finded",payload:a.data});case 13:return e.next=15,o({type:"changeStyleListLoading",payload:!1});case 15:case"end":return e.stop()}},e,this)}),add:l.default.mark(function e(t,r){var a,n=t.payload,u=t.callback,o=r.call,d=r.put;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o(p.add,n);case 2:if(a=e.sent,!a.success){e.next=9;break}return e.next=6,d({type:"added",payload:a.data});case 6:u&&u(),e.next=10;break;case 9:i.default.error(a.data);case 10:case"end":return e.stop()}},e,this)}),remove:l.default.mark(function e(t,r){var a,n=t.payload,u=r.call,o=r.put;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(p.remove,n);case 2:if(a=e.sent,!a.success){e.next=8;break}return e.next=6,o({type:"removed",payload:a.data});case 6:e.next=9;break;case 8:i.default.error(a.data);case 9:case"end":return e.stop()}},e,this)}),detail:l.default.mark(function e(t,r){var a,n=t.payload,u=r.call,o=r.put;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(p.detail,n);case 2:if(a=e.sent,!a.success){e.next=8;break}return e.next=6,o({type:"fetchDetail",payload:a.data});case 6:e.next=9;break;case 8:i.default.error(a.data);case 9:case"end":return e.stop()}},e,this)}),update:l.default.mark(function e(t,r){var a,n=t.payload,u=r.call,o=r.put;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(p.update,n);case 2:if(a=e.sent,!a.success){e.next=7;break}return e.next=6,o({type:"updated",payload:a.data});case 6:i.default.success("\u4fdd\u5b58\u6210\u529f");case 7:case"end":return e.stop()}},e,this)}),downloadImg:l.default.mark(function e(t,r){var a,n=t.payload,u=r.call,o=r.put;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(p.downloadImg,n);case 2:if(a=e.sent,!a.success){e.next=6;break}return e.next=6,o({type:"downloadedImg",payload:a.data});case 6:case"end":return e.stop()}},e,this)}),downloadColorImg:l.default.mark(function e(t,r){var a,n=t.payload,u=r.call,o=r.put;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(p.downloadColorImg,n);case 2:if(a=e.sent,!a.success){e.next=6;break}return e.next=6,o({type:"downloadedColorImg",payload:a.data});case 6:case"end":return e.stop()}},e,this)}),findSubscribe:l.default.mark(function e(t,r){var a,n=t.payload,u=r.call,o=r.put;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(p.findSubscribe,n);case 2:if(a=e.sent,!a.success){e.next=8;break}return e.next=6,o({type:"findedSubscribe",payload:a.data});case 6:e.next=9;break;case 8:i.default.error(a.data);case 9:case"end":return e.stop()}},e,this)}),findGoodsTypeColor:l.default.mark(function e(t,r){var a,n=t.payload,u=r.call,o=r.put;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(p.findGoodsTypeColor,n);case 2:if(a=e.sent,!a.success){e.next=8;break}return e.next=6,o({type:"findedColor",payload:a.data});case 6:e.next=9;break;case 8:i.default.error(a.data);case 9:case"end":return e.stop()}},e,this)}),clear:l.default.mark(function e(t,r){var a=r.put;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a({type:"cleared"});case 2:case"end":return e.stop()}},e,this)}),lookUpGoods:l.default.mark(function e(t,r){var a,n=t.payload,u=r.call,o=r.put;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(p.fetchGoodsIdBySubscribe,n);case 2:if(a=e.sent,!a.success){e.next=8;break}return e.next=6,o(f.routerRedux.push("/goods/edit-goods/"+a.data));case 6:e.next=9;break;case 8:i.default.error(a.data);case 9:case"end":return e.stop()}},e,this)}),changeColorModalVisible:l.default.mark(function e(t,r){var a=t.payload,n=r.put;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n({type:"changedColorModalVisible",payload:a});case 2:case"end":return e.stop()}},e,this)}),createNewColor:l.default.mark(function e(t,r){var a,n=t.payload,u=r.call,o=r.put;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(p.newColor,n);case 2:if(a=e.sent,!a.success){e.next=8;break}return e.next=6,o({type:"findedColor",payload:a.data});case 6:e.next=9;break;case 8:i.default.error(a.data);case 9:case"end":return e.stop()}},e,this)}),updateColorImg:l.default.mark(function e(t,r){var a=t.payload,n=r.put;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n({type:"updatedColorImg",payload:a});case 2:case"end":return e.stop()}},e,this)}),createGoodsType:l.default.mark(function e(t,r){var a=r.put;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a(f.routerRedux.push("/goods/edit-goods-type/create"));case 2:case"end":return e.stop()}},e,this)}),merge:l.default.mark(function e(t,r){var a,n=t.payload,u=t.callback,o=r.call;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o(p.merge,n);case 2:a=e.sent,a.success?u&&u():i.default.error(a.data);case 4:case"end":return e.stop()}},e,this)}),subscribe:l.default.mark(function e(t,r){var a,n=t.payload,u=t.callback,o=r.call,d=r.put;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o(p.subscribe,n);case 2:if(a=e.sent,!a.success){e.next=9;break}return e.next=6,d({type:"updaeSubscribe",payload:a.data});case 6:u&&u(),e.next=10;break;case 9:i.default.error(a.data);case 10:case"end":return e.stop()}},e,this)})},reducers:{changeStyleListLoading:function(e,t){var r=t.payload;return(0,d.default)({},e,{loading:r})},createFindFormValue:function(e,t){var r=t.payload;return(0,d.default)({},e,{findFormValue:(0,d.default)({},r)})},finded:function(e,t){var r=t.payload;r.brandArr.unshift({_id:"all",name:"\u5168\u90e8"});for(var a=r.list,n=r.goodsArr,u=0;u<a.length;u+=1){a[u].goodsArr=[];for(var o=0;o<n.length;o+=1)n[o].type===a[u]._id&&a[u].goodsArr.push(n[o])}return(0,d.default)({},e,{listData:{list:a,pagination:r.pagination},formBrandArr:r.brandArr})},added:function(e,t){var r=t.payload;return(0,d.default)({},e,{listData:{list:[r].concat((0,u.default)(e.listData.list)),pagination:e.listData.pagination}})},updated:function(e,t){var r=t.payload,a=r;a.imgs||(a.imgs=[]);for(var n=0;n<a.imgs.length;n+=1)a.imgs[n]&&(a.imgs[n]=m.QINIU_DOMAIN+"/goodsType/"+a._id+"/"+a.imgs[n].name);return(0,d.default)({},e,{detail:r})},downloadedImg:function(e,t){for(var r=t.payload,a=r,n=0;n<a.length;n+=1)a[n]&&(a[n]=m.QINIU_DOMAIN+"/goodsType/"+e.detail._id+"/"+a[n].name);return(0,d.default)({},e,{detail:(0,d.default)({},e.detail,{imgs:a})})},downloadedColorImg:function(e,t){var r=t.payload,a=r.fileName,n=r.index,o=r.colorId;o=o||"tmp";for(var s=e.detail.color?[].concat((0,u.default)(e.detail.color)):[{_id:"tmp",name:"",number:"",imgs:[]}],i=!0,c=0;c<s.length;c+=1)if(s[c]._id===o){s[c].imgs[n]=m.QINIU_DOMAIN+"/goodsType/"+e.detail._id+"/"+a,i=!1;break}return i&&(s.push({_id:o,name:"",imgs:[]}),s[s.length-1].imgs[n]=m.QINIU_DOMAIN+"/goodsType/"+e.detail._id+"/"+a),(0,d.default)({},e,{detail:(0,d.default)({},e.detail,{color:s})})},removed:function(e,t){for(var r=t.payload,a=e.listData.list,n=0;n<a.length;n+=1)if(a[n]._id===r){a.splice(n,1);break}return(0,d.default)({},e,{listData:{list:a,pagination:e.listData.pagination}})},resetedFormValue:function(e){return(0,d.default)({},e,{findFormValue:{name:null,brand_id:"all",gender:0}})},fetchDetail:function(e,t){var r=t.payload,a=r.goodsType||{};a.imgs||(a.imgs=[]);for(var n=0;n<a.imgs.length;n+=1)a.imgs[n]&&(a.imgs[n]=m.QINIU_DOMAIN+"/goodsType/"+a._id+"/"+a.imgs[n].name);return(0,d.default)({},e,{detail:r.goodsType||{},brandArr:r.brandArr,category:r.category})},findedSubscribe:function(e,t){var r=t.payload;return(0,d.default)({},e,{subscribeArr:r})},findedColor:function(e,t){var r=t.payload;return e.detail._id===r.id?(0,d.default)({},e,{detail:(0,d.default)({},e.detail,{color:r.colorArr}),colorModalVisible:!1}):e},cleared:function(e){return(0,d.default)({},e,{detail:{},brandArr:[],subscribeArr:null})},changedColorModalVisible:function(e,t){var r=t.payload;return(0,d.default)({},e,{colorModalVisible:r})},updatedColorImg:function(e,t){for(var r=t.payload,a=r.colorId,n=r.index,u=r.fileName,o=e.detail.color.slice(),s=!0,i=0;i<o.length;i+=1)if(o[i]._id===a){o[i].imgs[n]=m.QINIU_DOMAIN+"/goodsType/"+e.detail._id+"/"+u,s=!1;break}return s&&(o.push({_id:a,name:"",imgs:[]}),o[o.length-1].imgs[n]=m.QINIU_DOMAIN+"/goodsType/"+e.detail._id+"/"+u),(0,d.default)({},e,{detail:(0,d.default)({},e.detail,{color:o})})},updaeSubscribe:function(e,t){for(var r=t.payload,a=[].concat((0,u.default)(e.subscribeArr)),n=0;n<a.length;n+=1)if(a[n]._id===r._id){a[n]=(0,d.default)({},a[n],{is_subscribe:r.is_subscribe});break}return(0,d.default)({},e,{subscribeArr:a})}}},e.exports=t.default}});