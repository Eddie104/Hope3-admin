webpackJsonp([49],{1293:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.findNoColor=t.updateGoodsTypeChecked=t.updateGoodsType=t.updateColor=t.fetchGoodsType=t.fetchGoodsTypeColor=t.update=t.detail=t.find=void 0;var n=a(120),o=r(n),u=a(295),d=r(u),s=(t.find=function(){var e=(0,d.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.post)(l.SERVER_URL+"/admin/find_goods",t));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.detail=function(){var e=(0,d.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.get)(l.SERVER_URL+"/admin/detail_goods/"+t));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.update=function(){var e=(0,d.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.post)(l.SERVER_URL+"/admin/update_goods",t));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.fetchGoodsTypeColor=function(){var e=(0,d.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.get)(l.SERVER_URL+"/admin/fetch_goods_type_color/"+t));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.fetchGoodsType=function(){var e=(0,d.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.post)(l.SERVER_URL+"/admin/fetch_goods_type",t));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.updateColor=function(){var e=(0,d.default)(o.default.mark(function e(t){var a=t.goodsId,r=t.goodsColor,n=t.colorId;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.get)(l.SERVER_URL+"/admin/update_goods_color/"+a+"/"+r+"/"+n));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.updateGoodsType=function(){var e=(0,d.default)(o.default.mark(function e(t){var a=t.goodsId,r=t.goodsType;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.get)(l.SERVER_URL+"/admin/update_goods_type/"+a+"/"+r));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.updateGoodsTypeChecked=function(){var e=(0,d.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.get)(l.SERVER_URL+"/admin/update_goods_type_checked/"+t));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.findNoColor=function(){var e=(0,d.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.post)(l.SERVER_URL+"/admin/find_no_color_goods",t));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a(296)),l=a(183)},697:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(11),o=r(n),u=a(291),d=r(u),s=a(120),l=r(s);a(292);var i=a(1293),c=a(300);t.default={namespace:"goods",state:{loading:!1,findFormValue:{name:null,onlyShowNoGoodsType:!1},listData:{list:[],pagination:{total:0,current:0}},detail:{},relationColorModalVisible:!1,colorArr:[],relationGoodsTypeModalVisible:!1,goodsTypeData:{list:[],pagination:{total:0,current:0}}},effects:{find:l.default.mark(function e(t,a){var r,n=t.payload,o=a.call,u=a.put;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u({type:"changeStyleListLoading",payload:!0});case 2:return e.next=4,u({type:"createFindFormValue",payload:{name:n.name,onlyShowNoGoodsType:n.onlyShowNoGoodsType}});case 4:if(!n.resetFormValue){e.next=7;break}return e.next=7,u({type:"resetedFormValue"});case 7:return e.next=9,o(i.find,n);case 9:if(r=e.sent,!r.success){e.next=13;break}return e.next=13,u({type:"finded",payload:r.data});case 13:case"end":return e.stop()}},e,this)}),detail:l.default.mark(function e(t,a){var r,n=t.payload,o=a.call,u=a.put;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o(i.detail,n);case 2:if(r=e.sent,!r.success){e.next=8;break}return e.next=6,u({type:"fetchDetail",payload:r.data});case 6:e.next=9;break;case 8:d.default.error(r.data);case 9:case"end":return e.stop()}},e,this)}),update:l.default.mark(function e(t,a){var r,n=t.payload,o=a.call;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o(i.update,n);case 2:r=e.sent,r.success&&d.default.success("\u4fdd\u5b58\u6210\u529f");case 4:case"end":return e.stop()}},e,this)}),clearDetail:l.default.mark(function e(t,a){var r=a.put;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r({type:"clearedDetail"});case 2:case"end":return e.stop()}},e,this)}),changeRelationColorModalVisible:l.default.mark(function e(t,a){var r,n=t.payload,o=n.visible,u=n.goods_id,s=a.call,c=a.put;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=11;break}return e.next=3,s(i.fetchGoodsTypeColor,u);case 3:if(r=e.sent,!r.success){e.next=9;break}return e.next=7,c({type:"fetchedColor",payload:r.data});case 7:e.next=11;break;case 9:return d.default.error(r.data),e.abrupt("return");case 11:return e.next=13,c({type:"changedRelationColorModalVisible",payload:o});case 13:case"end":return e.stop()}},e,this)}),changeRelationGoodsTypeModalVisible:l.default.mark(function e(t,a){var r,n=t.payload,o=n.visible,u=n.params,s=a.call,c=a.put;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=11;break}return e.next=3,s(i.fetchGoodsType,u);case 3:if(r=e.sent,!r.success){e.next=9;break}return e.next=7,c({type:"fetchedGoodsType",payload:r.data});case 7:e.next=11;break;case 9:return d.default.error(r.data),e.abrupt("return");case 11:return e.next=13,c({type:"changedRelationGoodsTypeModalVisible",payload:o});case 13:case"end":return e.stop()}},e,this)}),updateColor:l.default.mark(function e(t,a){var r,n=t.payload,o=a.call,u=a.put;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o(i.updateColor,n);case 2:if(r=e.sent,!r.success){e.next=8;break}return e.next=6,u({type:"updatedColor",payload:r.data});case 6:e.next=9;break;case 8:d.default.error(r.data);case 9:case"end":return e.stop()}},e,this)}),updateGoodsType:l.default.mark(function e(t,a){var r,n=t.payload,o=a.call,u=a.put;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o(i.updateGoodsType,n);case 2:if(r=e.sent,!r.success){e.next=8;break}return e.next=6,u({type:"updatedGoodsType",payload:r.data});case 6:e.next=9;break;case 8:d.default.error(r.data);case 9:case"end":return e.stop()}},e,this)}),updateGoodsTypeChecked:l.default.mark(function e(t,a){var r,n=t.payload,o=a.call,u=a.put;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o(i.updateGoodsTypeChecked,n);case 2:if(r=e.sent,!r.success){e.next=8;break}return e.next=6,u({type:"updatedGoodsTypeChecked",payload:r.data});case 6:e.next=9;break;case 8:d.default.error(r.data);case 9:case"end":return e.stop()}},e,this)}),findNoColor:l.default.mark(function e(t,a){var r,n=t.payload,o=a.call,u=a.put;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u({type:"changeStyleListLoading",payload:!0});case 2:return e.next=4,o(i.findNoColor,n);case 4:if(r=e.sent,!r.success){e.next=8;break}return e.next=8,u({type:"findedNoColor",payload:r.data});case 8:case"end":return e.stop()}},e,this)})},reducers:{changeStyleListLoading:function(e,t){var a=t.payload;return(0,o.default)({},e,{loading:a})},createFindFormValue:function(e,t){var a=t.payload;return(0,o.default)({},e,{findFormValue:(0,o.default)({},a)})},finded:function(e,t){var a=t.payload,r=a.goodsTypeList,n=a.subscribeList,u=a.list,d=a.pagination;console.log(n);for(var s=null,l=null,i=0;i<u.length;i+=1)console.log(u[i].subscribe),s=(0,c.getItemFromArr)(r,"_id",u[i].type),u[i].goodsTypeName=s?s.name:"",l=(0,c.getItemFromArr)(n,"_id",u[i].subscribe),u[i].subscribeUrl=l?l.url:"#";return(0,o.default)({},e,{loading:!1,listData:{list:u,pagination:d}})},resetedFormValue:function(e){return(0,o.default)({},e,{findFormValue:{name:null,onlyShowNoGoodsType:!1}})},fetchDetail:function(e,t){var a=t.payload;return(0,o.default)({},e,{detail:a})},clearedDetail:function(e){return(0,o.default)({},e,{detail:{}})},changedRelationColorModalVisible:function(e,t){var a=t.payload;return(0,o.default)({},e,{relationColorModalVisible:a})},fetchedColor:function(e,t){var a=t.payload;return(0,o.default)({},e,{colorArr:a})},changedRelationGoodsTypeModalVisible:function(e,t){var a=t.payload;return(0,o.default)({},e,{relationGoodsTypeModalVisible:a})},updatedColor:function(e,t){var a=t.payload;return(0,o.default)({},e,{relationColorModalVisible:!1,detail:(0,o.default)({},e.detail,{size_color:a})})},fetchedGoodsType:function(e,t){var a=t.payload;return(0,o.default)({},e,{goodsTypeData:{list:a.list,pagination:a.pagination}})},updatedGoodsType:function(e,t){for(var a=t.payload,r=e.listData.list,n=0;n<r.length;n+=1)if(r[n]._id===a._id){r[n]=(0,o.default)({},a),r[n].goodsTypeName=a.goodsType;break}return(0,o.default)({},e,{relationGoodsTypeModalVisible:!1,detail:(0,o.default)({},a),listData:{list:r,pagination:e.pagination}})},updatedGoodsTypeChecked:function(e,t){for(var a=t.payload,r=e.listData.list,n=0;n<r.length;n+=1)if(r[n]._id===a._id){r[n]=(0,o.default)({},a,{goodsTypeName:r[n].goodsTypeName});break}return(0,o.default)({},e,{listData:{list:r,pagination:e.pagination}})}}},e.exports=t.default}});